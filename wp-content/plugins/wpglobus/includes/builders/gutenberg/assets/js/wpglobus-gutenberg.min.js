"use strict";jQuery(document).ready(function(B){var C={counter:0,noticeOn:!1,initDone:!1,languageSelectorBoxDelta:0,oldLanguageSelector:!1,languageSelectorEnabled:!0,parseBool:function(e){return!/^(false|0)$/i.test(e)&&!!e},getCounter:function(e){return C.counter},getOptionKey:function(e){return e=e||"",WPGlobusGutenberg.keyOption[e]},getOptions:function(){return WPGlobusGutenberg.options},isOldLanguageSelector:function(){return C.oldLanguageSelector},isPostDisabled:function(){return WPGlobusGutenberg.__post.disabled},isEnabledTab:function(e){void 0===e&&(e="options");var t=!1;return"options"==e&&C.parseBool(WPGlobusGutenberg.enabledOptionsTab)&&(t=!0),t},init:function(){WPGlobusGutenberg.yoastSeo=C.parseBool(WPGlobusGutenberg.yoastSeo),C.isPostDisabled()||(C.initListeners(),C.setTabs(),C.formHandler(),C.attachListeners())},initListeners:function(){WPGlobusGutenberg.yoastSeo&&1==B(".yoast.wpseo-metabox").length&&B(window).on("beforeunload",function(e){e.stopImmediatePropagation()})},formHandler:function(){var e=B(".metabox-base-form #referredby").attr("value");void 0!==e&&(e=-1==e.indexOf("language=en")?e+"&language="+WPGlobusGutenberg.language:e.replace("language=en","language="+WPGlobusGutenberg.language),B(".metabox-base-form #referredby").attr("value",e)),void 0!==(e=B('input[name="_wp_original_http_referer"]').attr("value"))&&(e=-1==e.indexOf("language=en")?e+"&language="+WPGlobusGutenberg.language:e.replace("language=en","language="+WPGlobusGutenberg.language),B('input[name="_wp_original_http_referer"]').attr("value",e))},setTabs:function(){if(0!=WPGlobusGutenberg.tabs.length){C.oldLanguageSelector=!0;var t=setInterval(function(){var e=B(".edit-post-header__settings");1==e.length&&(e.before(WPGlobusGutenberg.tabs),clearInterval(t))},200)}else C.WPGlobusSwitcherPlugin()},setSelectorStatus:function(){if(C.isOldLanguageSelector()){B(".wpglobus-gutenberg-selector-box").css({opacity:"0.2"}).attr("onclick","return false;"),C.languageSelectorEnabled=!1;var e=setInterval(function(){if(0==B(".is-saving").length){if(clearInterval(e),WPGlobusGutenberg.pagenow==WPGlobusGutenberg.postNewPage&&-1!=location.pathname.indexOf(WPGlobusGutenberg.postEditPage))return WPGlobusGutenberg.pagenow=WPGlobusGutenberg.postEditPage,B(".wpglobus-gutenberg-selector-box").css({opacity:"1"}).attr("onclick",""),void C.reloadPage();C.languageSelectorEnabled=!0,B(".wpglobus-gutenberg-selector-box").css({opacity:"1"}).attr("onclick","")}},400)}},reloadPage:function(){B(".wpglobus-selector-grid").css({"grid-template-columns":"10% 90%"}),B(".wpglobus-gutenberg-selector-text").text(WPGlobusGutenberg.i18n.reload),function e(){B(".wpglobus-gutenberg-selector").fadeOut(500).fadeIn(500,e)}(),setTimeout(function(){location.reload()},500)},attachListeners:function(){C.isOldLanguageSelector()&&(B(document).on("mouseenter",".wpglobus-gutenberg-selector",function(e){C.languageSelectorEnabled&&(B(".wpglobus-gutenberg-selector-dropdown").css({display:"block"}),C.languageSelectorBoxDelta=e.screenY,B(".edit-post-header").css({"z-index":"100000"}),B(".wpglobus-gutenberg-selector-box").css({"z-index":"100001"}))}),B(document).on("mouseleave",".wpglobus-gutenberg-selector",function(e){0!=C.languageSelectorBoxDelta&&e.screenY-C.languageSelectorBoxDelta<=0&&(B(".wpglobus-gutenberg-selector-dropdown").css({display:"none"}),B(".edit-post-header").css({"z-index":"9989"}),B(".wpglobus-gutenberg-selector-box").css({"z-index":"100"}))}),B(document).on("mouseleave",".wpglobus-gutenberg-selector-dropdown",function(e){B(".wpglobus-gutenberg-selector-dropdown").css({display:"none"}),B(".edit-post-header").css({"z-index":"9989"}),B(".wpglobus-gutenberg-selector-box").css({"z-index":"10000"})}),B(document).on("click",".editor-post-save-draft",function(){C.setSelectorStatus()}),B(document).on("click",".editor-post-publish-button",function(){C.setSelectorStatus()}))},WPGlobusSwitcherPlugin:function(){if(void 0!==wp.editPost&&void 0!==wp.plugins){var e=WPGlobusGutenberg.language,t=WPGlobusCoreData.enabled_languages,n=WPGlobusCoreData.en_language_name,o=WPGlobusGutenberg.flags_url,a=location.href,s={};for(var l in t)-1==a.indexOf("language="+e)?s[t[l]]=a+"&language="+t[l]:s[t[l]]=a.replace("language="+e,"language="+t[l]);var u=wp.i18n.__,r=wp.element.createElement,i=wp.element.Fragment,g=wp.components.TabPanel,c=wp.compose.withState,b=wp.components.RadioControl,p=wp.components.Notice,d=wp.components.Button,w=wp.editPost.PluginSidebarMoreMenuItem,m=wp.components.PanelBody,f=wp.editPost.PluginSidebar,G=wp.plugins.registerPlugin,h=B(".components-panel__header.edit-post-sidebar-header button.components-icon-button").eq(0),P={flagOnly:'<img height="20px" width="20px" src="'+WPGlobusGutenberg.flags_url[WPGlobusGutenberg.language]+'" />',flagLanguage:'<img height="20px" width="20px" src="'+WPGlobusGutenberg.flags_url[WPGlobusGutenberg.language]+'" />&nbsp;'+WPGlobusAdmin.data.en_language_name[WPGlobusGutenberg.language],flagCode:'<img height="20px" width="20px" src="'+WPGlobusGutenberg.flags_url[WPGlobusGutenberg.language]+'" />&nbsp;'+WPGlobusGutenberg.language,languageOnly:"&nbsp;"+WPGlobusAdmin.data.en_language_name[WPGlobusGutenberg.language],languageCode:"&nbsp;"+WPGlobusGutenberg.language},v="",_="",W=C.getOptionKey("switcherButtonType");y(WPGlobusGutenberg.options[W]),_=S(),B(document).on("click",h,function(){T()});var x=c({value:_})(function(e){e.value;var t=e.setState;return r(b,{label:"",help:"Select type of switcher language button.",selected:_,className:"wpglobus-switcher-components-radio-control",options:[{label:"Flag only",value:"flagOnly"},{label:"Flag with language",value:"flagLanguage"},{label:"Flag with language code",value:"flagCode"},{label:"Language only",value:"languageOnly"},{label:"Language code",value:"languageCode"}],onChange:function(e){t({value:_=e}),N(W,e)}})});G("wpglobus-switcher",{icon:"",render:function(){return T(),r(i,{},r(w,{target:"wpglobus-switcher-sidebar",icon:"admin-site"},u("WPGlobus")),r(f,{name:"wpglobus-switcher-sidebar",title:"WPGlobus",className:"wpglobus-switcher-components-panel"},r("div",{className:"wpglobus-switcher-message wpglobus-switcher-error-message hidden",style:{}},""),r(m,{className:"wpglobus-switcher-panel__body"},function(){var e=[{name:"switcher",title:"Languages",className:"wpglobus-panel-tab wpglobus-panel-tab-selector edit-post-sidebar__panel-tab"}];return WPGlobusGutenberg.isEnabledTab("options")&&e.push({name:"options",title:"Options",className:"wpglobus-panel-tab wpglobus-panel-tab-options edit-post-sidebar__panel-tab"}),r(g,{name:"WPGlobusSwitcherTabPanel",className:"wpglobus-tab-panel",activeClass:"is-active",tabs:e},E)}())))}})}function y(e){v=e=e||"flagLanguage"}function S(){return v}function L(e){void 0===e&&(e=!0);var t=document.querySelectorAll(".wpglobus-switcher-components-radio-control .components-radio-control__input");0!=t.length&&(e?(t.forEach(function(e){e.classList.add(e.value),e.classList.remove("wpglobus-switcher-pulsate-radio")}),document.querySelector(".wpglobus-switcher-components-radio-control ."+_).classList.add("wpglobus-switcher-pulsate-radio")):t.forEach(function(e){e.classList.remove("wpglobus-switcher-pulsate-radio")}))}function O(e,t){void 0===e||C.noticeOn||(C.noticeOn=!0,e.innerText=t,e.classList.remove("hidden"),setTimeout(function(){e.classList.add("hidden"),C.noticeOn=!1},3e3))}function N(e,t){t=t||"",W==(e=e||"")&&(L(!0),function(e,t){if(""==(e=e||""))return;var n={sender:"WPGlobusGutenberg",_action:"saveOption",is_admin:1};return n.counter=C.counter++,n.options={},n.options[e]=t,wp.ajax.post(WPGlobusGutenberg.wpglobusAjax,{data:n})}(e,t).then(function(e){"success"==e.result&&(y(t),T(WPGlobusGutenberg.options[W]=t))}).fail(function(e){var t=document.getElementsByClassName("wpglobus-switcher-error-message");void 0!==t[0]&&("error"==e.result?O(t[0],e.message):400==e.status&&O(t[0],"Error: "+e.status+" ("+e.statusText+")"),_=S());var n=document.getElementsByClassName("wpglobus-panel-tab-options");void 0!==n[0]&&-1!=n[0].classList.value.indexOf("is-active")&&n[0].click()}).always(function(){L(!1)}))}function k(e){return void 0===P[e]&&(e=v),P[e]}function T(a){void 0!==a&&void 0!==P[a]||(a=v),setTimeout(function(){for(var e=document.getElementsByClassName("components-icon-button"),t=0;t<e.length;t++){var n=e[t].getAttribute("aria-label");if(null!==n&&-1!=n.indexOf("WPGlobus"))if(void 0===e[t].dataset.done){var o=e[t].innerHTML;e[t].innerHTML=o+k(a),e[t].dataset.done="init"}else e[t].innerHTML=k(a),e[t].dataset.done="changed"}},300)}function E(e){return"switcher"==e.name?r("div",{className:"wpglobus-tab-content wpglobus-selector-tab-content"},r(p,{className:"wpglobus-switcher-panel__notice",status:"informational",isDismissible:!1},u("Select language")),r("div",{className:"wpglobus-switcher-panel__switcher-box"},WPGlobusGutenberg.pagenow==WPGlobusGutenberg.postNewPage?r("div",{style:{marginBottom:"20px"},className:"wpglobus-switcher-panel__switcher-notice"},WPGlobusGutenberg.i18n.save_post):r("ul",{className:"language-list"},t.map(function(e){return r("li",{key:e,className:"language-item"},r("img",{style:{marginRight:"7px"},className:"wpglobus-switcher-panel__flag",height:"20px",width:"20px",src:o[e]}),r(d,{href:s[e],isSmall:!0,isPrimary:!0},n[e]))}))),r(d,{className:"wpglobus-switcher-panel__button-link wpglobus-switcher-panel__info",href:WPGlobusGutenberg.store_link,isLink:!0,target:"_blank"},u("WPGlobus Premium Add-ons")),r(d,{className:"wpglobus-switcher-panel__button-link wpglobus-switcher-panel__settings-link",href:WPGlobusGutenberg.block_editor_tab_url,isLink:!0},u("Settings"))):"options"==e.name?r("div",{className:"wpglobus-tab-content wpglobus-options-tab-content"},r(p,{className:"wpglobus-switcher-panel__notice",status:"informational",isDismissible:!1},u("Select type")),r(x,null)):void 0}}};WPGlobusGutenberg=B.extend({},WPGlobusGutenberg,C),WPGlobusGutenberg.init()});